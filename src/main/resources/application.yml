# Server Configuration
server:
  # Port can be overridden with SERVER_PORT environment variable
  port: ${SERVER_PORT:8080}

# Application Configuration
application:
  name: "Jakarta EE Servlet Application"
  version: "1.0"

# File Upload Configuration
upload:
  # Maximum file size in bytes (10 MB)
  maxFileSize: 10485760
  # Maximum request size in bytes (50 MB)
  maxRequestSize: 52428800
  # File size threshold for writing to disk (1 MB)
  fileSizeThreshold: 1048576
  # Temporary directory for file uploads
  tempDirectory: ${java.io.tmpdir}

# Thread Pool Configuration
threadPool:
  # Maximum number of threads
  maxThreads: 200
  # Minimum spare threads
  minSpareThreads: 10
  # Accept count (queue size)
  acceptCount: 100
  # Connection timeout in milliseconds
  connectionTimeout: 20000

# Script Execution Configuration
script:
  # Script execution timeout in milliseconds (default: 5000ms = 5 seconds)
  timeout: 5000
  # Maximum memory usage per script in bytes (default: 52428800 bytes = 50 MB)
  # Note: This tracks JVM heap growth during script execution, including Rhino overhead
  # Set higher than expected usage as it includes Rhino's internal structures
  maxMemory: 52428800
  # Rhino optimization level (-1 = interpreted, 0-9 = compiled)
  # Use -1 for interpreted mode (safer for untrusted code)
  optimizationLevel: -1
  # Instruction count threshold for timeout/memory checks (default: 10000)
  # Lower values = more frequent checks = more overhead but more accurate limits
  instructionThreshold: 10000

# Logging Configuration
logging:
  # Log level: TRACE, DEBUG, INFO, WARN, ERROR (can be overridden with LOG_LEVEL)
  level: ${LOG_LEVEL:INFO}
  # Enable/disable file logging (can be overridden with LOG_FILE_ENABLED)
  fileEnabled: ${LOG_FILE_ENABLED:true}
  # Log file path (can be overridden with LOG_FILE_PATH)
  filePath: ${LOG_FILE_PATH:logs/application.log}
  # Maximum log file size before rolling (can be overridden with LOG_FILE_MAX_SIZE)
  fileMaxSize: ${LOG_FILE_MAX_SIZE:10MB}
  # Number of archived log files to keep (can be overridden with LOG_FILE_MAX_HISTORY)
  fileMaxHistory: ${LOG_FILE_MAX_HISTORY:30}
  # Total size cap for all log files (can be overridden with LOG_FILE_TOTAL_SIZE_CAP)
  fileTotalSizeCap: ${LOG_FILE_TOTAL_SIZE_CAP:1GB}
  # Log pattern for console output
  consolePattern: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
  # Log pattern for file output
  filePattern: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
